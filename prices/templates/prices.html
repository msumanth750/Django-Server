{% extends 'myapp/base.html' %}
{%block main_content%}
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
<div class="container-fluid px-4 m-5">
    <h1 class="mt-4">Prices</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item active">Dashboard</li>
    </ol>
    <div class="card mb-4">
        <div class="card-header">
            <i class="fas fa-table me-1"></i>
            Current prices
            <input class="form-control" id="myInput" type="text" placeholder="Search..">

        </div>
        <div class="card-body">
            <table id="table table-sm">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Bar price</th>
                        <th>MRP</th>
                        <th>Min Price</th>
                        <th>Eff Date</th>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                      <th>ID</th>
                      <th>Name</th>
                      <th>Bar Price</th>
                      <th>MRP</th>
                      <th>Min Price</th>
                      <th>Eff Date</th>
                    </tr>
                </tfoot>
                <tbody id="myTable">
                  {%for price in object_list%}
                  <tr>
                    <td>{{price.brand.numericcode}}</td>
                    <td>{{price.brand}}</td>
                    <td>{{price.bar_price}}</td>
                    <td>{{price.mrp}}</td>
                    <td>{{price.min_price}}</td>
                    <td>{{price.effective_date}}</td>
                  </tr>
                  {%endfor%}
                </tbody>
            </table>
        </div>
    </div>
</div>
<script>
   $(document).ready(function() {
     $("#myInput").on("keyup", function() {
       var value = $(this).val().toLowerCase();
       $("#myTable tr").filter(function() {
         $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
       });
     });
   });
 </script>
{%endblock%}
